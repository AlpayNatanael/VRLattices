<!DOCTYPE html>

<html>
  <!--script type="text/javascript" src="posets.js"></script-->
  <script type="text/javascript" src="code.js"></script>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>VR objects</title>

    <!-- Babylon.js -->
    <!--script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
        <script src="https://preview.babylonjs.com/ammo.js"></script>
        <script src="https://preview.babylonjs.com/cannon.js"></script>
        <script src="https://preview.babylonjs.com/Oimo.js"></script>
        <script src="https://preview.babylonjs.com/earcut.min.js"></script-->
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <!--script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
        <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
        <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
        <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
        <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
        <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
        <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script-->

    <style>
      html,
      body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #renderCanvas {
        width: 100%;

        height: 100%;

        touch-action: none;
      }
    </style>
  </head>

  <body>
    <canvas id="renderCanvas"></canvas>

    <script>
      Lattice2Babylon = function (L, ipos, scene) {
        // A function that takes in a the following paramets
        // - lattice: lattice coordinates
        // - ipos: the connections
        // - scene: the scene in which to draw the lattice
        var sphereList = [];
        var myPath;
        var tube;
        var j;
        var meshArray = [];
        for (i in L.posi) {
          var sphere = BABYLON.Mesh.CreateSphere("sphere", 10, 0.1, scene);
          sphere.position = new BABYLON.Vector3(L.posi[i][0] + ipos[0], L.posi[i][1] + ipos[1], L.posi[i][2] + ipos[2]);
          sphere.material = new BABYLON.StandardMaterial("sphere material", scene);
          sphere.material.diffuseColor = new BABYLON.Color3(0, 1, 0);

      
          meshArray.push(sphere);
        }

        for (i in L.ucov) {
          for (k in L.ucov[i]) {
            j = L.ucov[i][k];
            myPath = [new BABYLON.Vector3(L.posi[i][0] + ipos[0], L.posi[i][1] + ipos[1], L.posi[i][2] + ipos[2]), new BABYLON.Vector3(L.posi[j][0] + ipos[0], L.posi[j][1] + ipos[1], L.posi[j][2] + ipos[2])];
            console.log(L.posi[i], L.posi[j]);
            tube = BABYLON.MeshBuilder.CreateTube(
              "tube",
              {
                path: myPath,
                radius: 0.01,
                sideOrientation: BABYLON.Mesh.DOUBLESIDE,
                updatable: true,
              },
              scene
            );
            meshArray.push(tube);
          }
        }
        return BABYLON.Mesh.MergeMeshes(meshArray); //meshArray;
      };

      Lattice2Mesh = function (L) {
        var mesh = BABYLON.Mesh.MergeMeshes(Lattice2Babylon(L),allow32BitsIndices= true);
        return mesh;
      };

      var canvas = document.getElementById("renderCanvas");
      var createDefaultEngine = function () {
        return new BABYLON.Engine(canvas, true, {
          preserveDrawingBuffer: true,
          stencil: true,
        });
      };
      var createScene = function () {
        // Create scene
        var scene = new BABYLON.Scene(engine);
        scene.clearColor = new BABYLON.Color3(1,1,1);//.FromHexString("#74b9ff");//BABYLON.Color3(1, 1, 1);

        //scene.ambientColor = new BABYLON.Color3(1, 1, 1);
        var light = new BABYLON.DirectionalLight("light", new BABYLON.Vector3(0, 0, -10), scene);
        //light.position = new BABYLON.Vector3(0, 5, -2);

        // Parameters: name, alpha, beta, radius, target position, scene
        var camera = new BABYLON.ArcRotateCamera("camera1", -Math.PI / 2, 0, 20, new BABYLON.Vector3(0, 0, 0), scene);
        //camera.attachControl(canvas, true);
        //environment.setMainColor(BABYLON.Color3.FromHexString("#74b9ff"))

        
        
        //scene.activeCamera.beta += 0.8;
        //camera.rotation.beta = 45 ;

        //////////////////////////   Lattices   //////////////////////////////////////////////////////////////////////////////

        /*
      [
      [[0,1,2,3], [0,1,2,4], [0,1,3,4], [0,2,3,4], [1,2,3,4] ]
      ]
      */

        L = {
            posi:{
            0:[-0.0490,-0.0131,-9],
            1:[-4.0239,9.9008,-7],
            2:[3.2152,-9.4089,-7],
            3:[-1.4124,0.6670,-3],
            4:[-12.8529,-6.6844,-7],
            5:[-14.5594,2.8671,-5],
            6:[-8.4885,-13.4629,-5],
            7:[-11.3456,-4.7513,-1],
            8:[12.4883,7.4045,-7],
            9:[7.1289,14.8317,-5],
            10:[13.6274,-1.4653,-5],
            11:[9.3179,6.5891,-1],
            12:[-0.1940,1.2884,-3],
            13:[-3.4893,9.1727,-1],
            14:[2.6766,-7.1460,-1],
            15:[-1.2701,1.6183,2],
            16:[-12.6649,6.9557,-7],
            17:[-21.7249,0.4709,-5],
            18:[-14.7762,13.3385,-5],
            19:[-23.0815,7.8675,-3],
            20:[12.5036,-7.6164,-7],
            21:[14.7331,-13.7638,-5],
            22:[0.1297,-1.0961,-3],
            23:[21.6859,-0.3598,-5],
            24:[22.8802,-7.6165,-3],
            25:[-4.2475,-4.9305,-7],
            26:[-14.1684,1.6832,-5],
            27:[7.0387,-10.4472,-5],
            28:[-3.7097,-4.5896,-1],
            29:[-8.6360,4.5570,-5],
            30:[-16.0863,10.3861,-3],
            31:[-15.0415,-8.8198,-5],
            32:[-16.7516,-1.6031,-3],
            33:[-23.2636,-4.1169,-3],
            34:[-23.1793,3.7155,-1],
            35:[3.5910,4.4455,-7],
            36:[-8.1331,9.5309,-5],
            37:[13.8385,-3.0744,-5],
            38:[3.3465,2.7714,-1],
            39:[14.9752,8.8397,-5],
            40:[23.2182,3.7884,-3],
            41:[-1.1058,-0.5529,-3],
            42:[-10.9210,5.1892,-1],
            43:[9.5873,-6.4851,-1],
            44:[-0.9454,-1.3036,2],
            45:[8.0171,-4.5378,-5],
            46:[16.4154,1.9476,-3],
            47:[16.0145,-10.9560,-3],
            48:[23.2241,-3.8310,-1],
            49:[-8.5355,-2.5440,-7],
            50:[-18.0083,-9.4939,-5],
            51:[-18.8934,-10.6393,-3],
            52:[-17.9032,5.2860,-5],
            53:[-24.0974,-1.4465,-3],
            54:[-26.0902,-5.5412,-1],
            55:[-19.0781,10.6468,-3],
            56:[-26.0863,6.1607,-1],
            57:[-26.7419,2.1284,1],
            58:[-5.4377,3.2411,-5],
            59:[-15.0124,7.1858,-3],
            60:[-14.8944,-4.4544,-3],
            61:[-21.9869,1.1093,-1],
            62:[-13.3906,-7.4878,0],
            63:[-21.2634,-2.1957,2],
            64:[6.6443,7.3157,-3],
            65:[-4.2895,3.0381,0],
            66:[-5.2527,-12.1249,-5],
            67:[-14.9069,-15.0632,-3],
            68:[-13.9462,-3.9791,-3],
            69:[-21.3747,-8.5948,-1],
            70:[-13.0982,4.0124,0],
            71:[-21.2157,-0.7220,2],
            72:[6.4587,-16.1834,-3],
            73:[-3.5269,-9.6413,0],
            74:[-1.1388,-6.0860,-3],
            75:[-12.0900,-11.0975,-1],
            76:[9.4217,0.4965,-1],
            77:[-1.4651,-4.4950,2],
            78:[-11.8248,-0.6435,-1],
            79:[-19.1875,-5.4425,1],
            80:[9.2741,-12.8638,-1],
            81:[18.3436,-5.6022,1],
            82:[-0.8335,-6.2711,2],
            83:[9.4221,2.2494,-7],
            84:[5.5708,-3.3343,-5],
            85:[-5.7486,-7.3490,-3],
            86:[5.4364,11.9161,-5],
            87:[1.1164,5.9768,-3],
            88:[-9.1947,-0.3172,-1],
            89:[-5.4192,15.0429,-3],
            90:[-8.6572,11.8980,-1],
            91:[-17.6187,5.0546,1],
            92:[1.6232,-0.5879,-3],
            93:[-9.9440,-6.2708,0],
            94:[-9.9799,8.8417,0],
            95:[-18.6782,3.0271,3],
            96:[18.0515,9.6015,-5],
            97:[14.6020,15.3643,-3],
            98:[14.5198,4.7490,-3],
            99:[11.8158,11.4233,-1],
            100:[4.5196,-1.9106,0],
            101:[1.2423,5.9454,2],
            102:[19.1061,10.5491,-3],
            103:[12.7663,7.3957,0],
            104:[11.5281,5.7213,0],
            105:[0.1064,0.0919,3],
            106:[17.9497,-5.6699,-5],
            107:[14.7248,-7.3936,-3],
            108:[13.9498,3.4449,-3],
            109:[11.7590,0.2231,-1],
            110:[4.2021,8.2158,0],
            111:[1.4044,4.6973,2],
            112:[19.0641,-11.6759,-3],
            113:[12.1501,-4.3119,0],
            114:[11.8571,-10.2484,0],
            115:[0.5656,-0.9591,3],
            116:[24.0967,1.4172,-3],
            117:[20.9901,8.6042,-1],
            118:[25.8745,-6.2371,-1],
            119:[19.6724,1.1771,2],
            120:[21.6440,-1.0298,-1],
            121:[18.9064,5.5785,1],
            122:[26.1101,5.3309,-1],
            123:[27.0158,-2.3747,1],
            124:[20.1877,-3.9785,3],
            125:[20.6345,1.9595,2],
            126:[0.1483,-14.2565,-7],
            127:[-6.8141,-14.4693,-5],
            128:[8.2703,-10.2954,-5],
            129:[1.3122,-11.9562,-1],
            130:[1.3002,-20.6208,-5],
            131:[-3.8831,-21.4197,-3],
            132:[5.1424,-15.7919,-3],
            133:[-0.6304,-17.6139,-1],
            134:[10.9152,-18.3897,-5],
            135:[17.4264,-15.5676,-3],
            136:[11.3442,-22.0136,-3],
            137:[13.7552,-19.3675,-1],
            138:[18.2304,-19.6859,-1],
            139:[5.1409,-24.0902,-1],
            140:[7.8988,-21.0838,1],
            141:[10.8165,-19.4373,2],
            142:[19.8535,-10.8858,-3],
            143:[21.0170,-15.8968,-1],
            144:[22.3593,-12.1753,1],
            145:[16.1805,-13.3663,3],
            146:[24.0411,-9.7079,-1],
            147:[24.7256,-14.3305,1],
            148:[24.7522,-9.8965,3],
            149:[17.7151,-12.1151,5],
            150:[-2.1830,-16.4524,-5],
            151:[6.5556,-21.3492,-3],
            152:[3.8743,-13.6667,-3],
            153:[12.5804,-16.9201,-1],
            154:[19.9373,-11.8974,1],
            155:[-7.0117,-7.4916,-3],
            156:[0.3409,-6.7043,-1],
            157:[10.0372,-10.8035,1],
            158:[16.4949,-5.5805,3],
            159:[-0.7662,-21.5302,-3],
            160:[7.6354,-25.2305,-1],
            161:[13.9813,-21.8533,1],
            162:[19.8749,-15.9674,3],
            163:[-2.1580,-11.5238,0],
            164:[9.9809,-14.2458,3],
            165:[16.7618,-8.2606,5],
            166:[-0.1101,-15.2219,0],
            167:[8.8831,-19.3983,2],
            168:[18.7374,-10.7498,5],
            169:[-11.0215,-18.5560,-5],
            170:[-7.3409,-24.0007,-3],
            171:[-16.9717,-18.4970,-3],
            172:[-12.4142,-22.8903,-1],
            173:[-10.4743,-20.7657,1],
            174:[-19.7735,-11.2971,-3],
            175:[-23.5314,-12.2108,-1],
            176:[-19.3409,-17.9705,1],
            177:[-16.5663,-14.5249,3],
            178:[0.0365,-22.3833,-3],
            179:[1.5126,-26.5395,-1],
            180:[-4.4843,-26.4950,1],
            181:[-2.0528,-22.7985,3],
            182:[-7.6736,-13.8927,0],
            183:[-9.8759,-19.7703,3],
            184:[-7.0979,-15.6589,5],
            185:[7.8454,-12.5166,0],
            186:[9.8135,-18.0933,2],
            187:[5.7759,-14.8201,5],
            188:[-11.7334,-18.4188,-3],
            189:[-14.9341,-10.8149,-1],
            190:[-8.3522,-24.6708,-1],
            191:[-10.8433,-14.9053,2],
            192:[-21.3491,-13.0145,-1],
            193:[-22.9592,-5.0913,1],
            194:[-1.8289,-24.2726,-1],
            195:[-0.0621,-27.9117,1],
            196:[-10.2172,-16.3815,2],
            197:[-17.7492,-19.1058,-1],
            198:[-13.8065,-24.2112,1],
            199:[-5.6487,-26.3656,3],
            200:[-11.1113,-19.8036,3],
            201:[-2.0985,-22.2875,5],
            202:[-24.5564,-13.6437,1],
            203:[-19.5387,-18.3570,3],
            204:[-11.4024,-20.2750,5],
            205:[-17.3200,-13.5280,5],
            206:[-7.6124,-14.5982,7],
            207:[-24.8765,-5.8961,3],
            208:[-19.0108,-10.0512,5],
            209:[-4.7921,-16.5821,-1],
            210:[4.6123,-20.8521,1],
            211:[5.9518,-23.9100,3],
            212:[11.0473,-13.8240,3],
            213:[11.7216,-18.0212,5],
            214:[-8.2659,-9.8737,1],
            215:[1.7712,-14.0282,3],
            216:[1.4050,-16.9402,5],
            217:[7.5252,-6.7512,5],
            218:[7.2054,-9.5721,7],
            219:[-16.2816,-3.8005,3],
            220:[-5.9808,-7.4258,5],
            221:[-9.0570,-15.6677,2],
            222:[-17.1830,-6.0862,5],
            223:[0.5534,-21.2519,5],
            224:[-7.1485,-11.5256,7],
            225:[7.2978,-13.9773,7],
            226:[0.3088,14.3189,-7],
            227:[-6.6459,10.3130,-5],
            228:[8.3923,13.9959,-5],
            229:[1.7018,11.3943,-1],
            230:[1.6297,16.4858,-5],
            231:[-3.5886,13.6781,-3],
            232:[5.6515,7.9076,-3],
            233:[-0.6853,6.8524,-1],
            234:[11.1260,18.6864,-5],
            235:[17.4213,18.3463,-3],
            236:[11.6396,18.4840,-3],
            237:[14.3694,11.2263,-1],
            238:[18.2232,18.9543,-1],
            239:[5.3432,16.6117,-1],
            240:[8.2773,10.0042,1],
            241:[11.2450,15.2545,2],
            242:[20.1325,11.1889,-3],
            243:[21.4384,12.6888,-1],
            244:[22.9644,5.1093,1],
            245:[16.7396,3.5596,3],
            246:[23.9702,12.0853,-1],
            247:[24.7693,13.4476,1],
            248:[25.1074,5.8357,3],
            249:[18.2634,5.7020,5],
            250:[0.6742,0.3101,-3],
            251:[-6.3506,-1.9777,-1],
            252:[8.1528,2.0647,-1],
            253:[2.1247,-0.1863,2],
            254:[6.2151,-3.1210,0],
            255:[-0.0380,-4.8637,2],
            256:[16.2833,-0.2380,0],
            257:[21.4887,1.0647,2],
            258:[19.8253,-2.8034,3],
            259:[22.9100,-1.3631,5],
            260:[13.0446,-4.3295,5],
            261:[14.5687,-2.4310,7],
            262:[-1.8178,20.8542,-5],
            263:[6.8275,24.4273,-3],
            264:[4.1881,21.2055,-3],
            265:[12.3638,22.9088,-1],
            266:[19.4737,17.7914,1],
            267:[-6.2429,16.0440,-3],
            268:[0.5896,17.5269,-1],
            269:[10.0011,20.8123,1],
            270:[16.4996,14.4606,3],
            271:[-6.8444,3.5214,0],
            272:[0.2362,5.1056,2],
            273:[13.6718,3.7919,5],
            274:[-0.7535,21.8694,-3],
            275:[7.5680,25.0468,-1],
            276:[13.5615,24.2715,1],
            277:[19.4952,18.2329,3],
            278:[-1.7166,15.2830,0],
            279:[9.9796,20.1365,3],
            280:[16.9382,13.4745,5],
            281:[0.0035,12.1974,0],
            282:[8.9717,16.2834,2],
            283:[18.4534,10.3187,5],
            284:[-1.3179,0.2568,3],
            285:[14.8962,1.1101,7],
            286:[-10.7810,18.4102,-5],
            287:[-7.0715,21.2552,-3],
            288:[-17.0204,15.5121,-3],
            289:[-12.7231,17.0123,-1],
            290:[-10.7161,11.0762,1],
            291:[-19.5091,11.8240,-3],
            292:[-23.6274,9.9981,-1],
            293:[-19.9074,12.4437,1],
            294:[-16.8278,6.1482,3],
            295:[-15.3988,0.6977,0],
            296:[-19.9437,-1.0055,2],
            297:[-13.4378,-3.5685,5],
            298:[0.5363,22.4635,-3],
            299:[1.7810,24.0813,-1],
            300:[-4.5127,21.0896,1],
            301:[-1.8380,14.1856,3],
            302:[-7.7401,14.0491,0],
            303:[-10.4653,14.9179,3],
            304:[-7.4915,7.5190,5],
            305:[8.3625,13.3682,0],
            306:[10.1367,15.2445,2],
            307:[6.2965,6.9039,5],
            308:[0.6773,0.7140,3],
            309:[-0.3316,-3.5278,7],
            310:[-11.4084,21.9601,-3],
            311:[-20.9924,16.4209,-1],
            312:[-1.5505,26.9061,-1],
            313:[-10.0435,19.8826,2],
            314:[-14.1028,19.0865,-1],
            315:[-22.3051,12.2470,1],
            316:[-19.9843,3.3256,3],
            317:[-8.3579,25.1584,-1],
            318:[-0.2175,28.0027,1],
            319:[-10.2543,18.8232,2],
            320:[-17.9286,19.3553,-1],
            321:[-14.3772,21.8597,1],
            322:[-6.0569,24.1742,3],
            323:[-11.4714,14.2462,3],
            324:[-2.0160,17.4022,5],
            325:[-24.6355,14.4554,1],
            326:[-20.1075,16.2953,3],
            327:[-11.7930,18.9782,5],
            328:[-17.6335,8.6892,5],
            329:[-7.8492,10.5721,7],
            330:[-24.5194,9.8732,3],
            331:[-22.4553,1.5781,5],
            332:[-19.1213,10.8557,5],
            333:[-15.4102,-0.8632,7],
            334:[-4.4046,23.5330,-1],
            335:[4.8060,26.2943,1],
            336:[5.7874,26.1764,3],
            337:[10.9769,19.0676,3],
            338:[11.7384,19.5827,5],
            339:[-7.5004,20.6064,1],
            340:[2.1294,22.6803,3],
            341:[1.8019,22.1831,5],
            342:[7.4311,15.0944,5],
            343:[7.3938,13.9449,7],
            344:[-15.6932,13.1683,3],
            345:[-12.4913,4.4228,5],
            346:[-5.6133,15.3403,5],
            347:[0.8069,3.7779,7],
            348:[-8.8158,18.3238,2],
            349:[-16.7545,11.6659,5],
            350:[-13.2525,2.2943,7],
            351:[0.3233,20.8903,5],
            352:[-7.0852,14.1188,7],
            353:[7.5229,11.1272,7],
            354:[0.0701,0.0283,9],
            },
            ucov:{
            0:[1,2,4,8,16,20,25,35,49,83,126,226,],
            1:[3,5,9,18,29,86,262,],
            2:[3,6,10,21,45,66,130,],
            3:[7,11,70,113,163,281,],
            4:[5,6,12,17,31,50,169,],
            5:[7,13,19,32,],
            6:[7,14,67,170,],
            7:[15,71,191,],
            8:[9,10,12,23,39,96,234,],
            9:[11,13,97,263,],
            10:[11,14,24,46,],
            11:[15,119,282,],
            12:[13,14,65,100,185,302,],
            13:[15,101,313,],
            14:[15,77,186,],
            15:[218,329,],
            16:[17,18,22,26,36,52,286,],
            17:[19,33,53,174,291,],
            18:[19,30,55,89,310,],
            19:[34,56,311,],
            20:[21,22,23,27,37,106,134,],
            21:[24,47,72,112,136,],
            22:[28,38,73,110,182,305,],
            23:[24,40,116,142,242,],
            24:[48,118,143,],
            25:[26,27,29,31,41,84,150,],
            26:[28,30,33,42,],
            27:[28,43,107,151,],
            28:[44,111,196,],
            29:[30,32,87,155,267,],
            30:[34,90,314,],
            31:[32,33,51,85,188,],
            32:[34,88,189,],
            33:[34,54,192,],
            34:[57,91,193,315,],
            35:[36,37,39,41,45,58,230,],
            36:[38,42,59,287,],
            37:[38,40,43,47,],
            38:[44,82,306,],
            39:[40,46,64,102,236,],
            40:[48,122,243,],
            41:[42,43,62,103,166,278,],
            42:[44,63,319,],
            43:[44,125,167,],
            44:[206,343,],
            45:[46,47,74,132,232,],
            46:[48,76,237,],
            47:[48,80,137,],
            48:[81,123,144,244,],
            49:[50,52,58,66,92,127,227,],
            50:[51,53,60,67,171,],
            51:[54,62,93,197,],
            52:[53,55,59,68,288,],
            53:[54,56,61,69,175,292,],
            54:[57,63,202,],
            55:[56,70,94,320,],
            56:[57,71,325,],
            57:[95,207,330,],
            58:[59,60,64,74,231,],
            59:[61,78,289,],
            60:[61,62,65,75,],
            61:[63,79,293,],
            62:[63,105,200,],
            63:[205,332,],
            64:[65,76,104,239,],
            65:[77,105,303,],
            66:[67,68,72,74,131,],
            67:[69,75,172,],
            68:[69,70,73,78,],
            69:[71,79,176,],
            70:[71,115,323,],
            71:[208,328,],
            72:[73,80,114,139,],
            73:[82,115,183,],
            74:[75,76,78,80,133,233,],
            75:[77,79,173,],
            76:[77,81,240,],
            77:[187,304,],
            78:[79,82,290,],
            79:[177,294,],
            80:[81,82,140,],
            81:[124,145,245,],
            82:[184,307,],
            83:[84,86,92,96,106,128,228,],
            84:[85,87,98,107,152,],
            85:[88,93,100,209,],
            86:[87,89,97,108,264,],
            87:[88,90,99,109,156,268,],
            88:[91,101,214,],
            89:[90,94,110,334,],
            90:[91,111,339,],
            91:[95,219,344,],
            92:[93,94,104,114,129,229,],
            93:[95,105,221,],
            94:[95,115,348,],
            95:[222,349,],
            96:[97,98,102,116,235,],
            97:[99,117,265,],
            98:[99,100,103,120,],
            99:[101,121,269,],
            100:[101,105,212,],
            101:[217,346,],
            102:[103,104,122,238,],
            103:[105,125,279,],
            104:[105,124,241,],
            105:[225,352,],
            106:[107,108,112,116,135,],
            107:[109,120,153,],
            108:[109,110,113,117,],
            109:[111,121,157,],
            110:[111,115,337,],
            111:[220,342,],
            112:[113,114,118,138,],
            113:[115,119,164,],
            114:[115,124,141,],
            115:[224,353,],
            116:[117,118,120,122,146,246,],
            117:[119,121,266,],
            118:[119,123,147,],
            119:[165,283,],
            120:[121,125,154,],
            121:[158,270,],
            122:[123,125,247,],
            123:[124,148,248,],
            124:[149,249,],
            125:[168,280,],
            126:[127,128,130,134,150,169,250,],
            127:[129,131,171,251,],
            128:[129,135,152,252,],
            129:[141,221,253,],
            130:[131,132,136,159,170,],
            131:[133,139,172,],
            132:[133,137,166,254,],
            133:[140,173,255,],
            134:[135,136,142,151,178,],
            135:[138,146,153,],
            136:[137,138,139,143,160,179,],
            137:[140,144,167,],
            138:[141,147,161,],
            139:[140,141,180,],
            140:[145,181,],
            141:[149,223,],
            142:[143,146,185,256,],
            143:[144,147,186,],
            144:[145,148,258,],
            145:[149,187,260,],
            146:[147,154,257,],
            147:[148,162,],
            148:[149,168,259,],
            149:[225,261,],
            150:[151,152,155,159,188,],
            151:[153,160,194,],
            152:[153,156,209,],
            153:[154,157,161,210,],
            154:[158,162,212,],
            155:[156,163,189,271,],
            156:[157,214,272,],
            157:[158,164,215,],
            158:[165,217,273,],
            159:[160,163,166,190,],
            160:[161,167,195,],
            161:[162,164,211,],
            162:[165,168,213,],
            163:[164,191,284,],
            164:[165,216,],
            165:[218,285,],
            166:[167,200,284,],
            167:[168,201,],
            168:[225,285,],
            169:[170,171,174,178,188,],
            170:[172,179,190,],
            171:[172,175,197,],
            172:[173,176,180,198,],
            173:[177,181,200,],
            174:[175,182,192,295,],
            175:[176,202,296,],
            176:[177,183,203,],
            177:[184,205,297,],
            178:[179,182,185,194,],
            179:[180,186,195,],
            180:[181,183,199,],
            181:[184,187,201,],
            182:[183,196,308,],
            183:[184,204,],
            184:[206,309,],
            185:[186,212,308,],
            186:[187,213,],
            187:[225,309,],
            188:[189,190,192,194,197,209,],
            189:[191,193,214,],
            190:[191,195,198,],
            191:[208,216,],
            192:[193,196,202,],
            193:[207,219,316,],
            194:[195,196,210,],
            195:[199,211,],
            196:[204,220,],
            197:[198,202,221,],
            198:[199,200,203,],
            199:[201,204,223,],
            200:[201,205,],
            201:[206,225,],
            202:[203,207,],
            203:[204,205,208,],
            204:[206,224,],
            205:[206,333,],
            206:[354,],
            207:[208,222,331,],
            208:[224,333,],
            209:[210,214,221,],
            210:[211,212,215,],
            211:[213,216,223,],
            212:[213,217,],
            213:[218,225,],
            214:[215,219,],
            215:[216,217,220,],
            216:[218,224,],
            217:[218,347,],
            218:[354,],
            219:[220,222,345,],
            220:[224,347,],
            221:[222,223,],
            222:[224,350,],
            223:[224,225,],
            224:[354,],
            225:[354,],
            226:[227,228,230,234,250,262,286,],
            227:[229,231,251,288,],
            228:[229,235,252,264,],
            229:[241,253,348,],
            230:[231,232,236,274,287,],
            231:[233,239,289,],
            232:[233,237,254,281,],
            233:[240,255,290,],
            234:[235,236,242,263,298,],
            235:[238,246,265,],
            236:[237,238,239,243,275,299,],
            237:[240,244,282,],
            238:[241,247,276,],
            239:[240,241,300,],
            240:[245,301,],
            241:[249,351,],
            242:[243,246,256,305,],
            243:[244,247,306,],
            244:[245,248,258,],
            245:[249,260,307,],
            246:[247,257,266,],
            247:[248,277,],
            248:[249,259,283,],
            249:[261,353,],
            250:[251,252,254,256,271,295,],
            251:[253,255,296,],
            252:[253,257,272,],
            253:[261,350,],
            254:[255,258,284,],
            255:[260,297,],
            256:[257,258,308,],
            257:[259,273,],
            258:[259,260,],
            259:[261,285,],
            260:[261,309,],
            261:[354,],
            262:[263,264,267,274,310,],
            263:[265,275,312,],
            264:[265,268,334,],
            265:[266,269,276,335,],
            266:[270,277,337,],
            267:[268,271,278,314,],
            268:[269,272,339,],
            269:[270,279,340,],
            270:[273,280,342,],
            271:[272,284,316,],
            272:[273,345,],
            273:[285,347,],
            274:[275,278,281,317,],
            275:[276,282,318,],
            276:[277,279,336,],
            277:[280,283,338,],
            278:[279,284,319,],
            279:[280,341,],
            280:[285,343,],
            281:[282,284,323,],
            282:[283,324,],
            283:[285,353,],
            284:[285,333,],
            285:[354,],
            286:[287,288,291,298,310,],
            287:[289,299,317,],
            288:[289,292,320,],
            289:[290,293,300,321,],
            290:[294,301,323,],
            291:[292,295,302,311,],
            292:[293,296,325,],
            293:[294,303,326,],
            294:[297,304,328,],
            295:[296,308,316,],
            296:[297,331,],
            297:[309,333,],
            298:[299,302,305,312,],
            299:[300,306,318,],
            300:[301,303,322,],
            301:[304,307,324,],
            302:[303,308,313,],
            303:[304,327,],
            304:[309,329,],
            305:[306,308,337,],
            306:[307,338,],
            307:[309,353,],
            308:[309,347,],
            309:[354,],
            310:[311,312,314,317,320,334,],
            311:[313,315,325,],
            312:[313,318,335,],
            313:[327,346,],
            314:[315,319,339,],
            315:[316,330,344,],
            316:[331,345,],
            317:[318,319,321,],
            318:[322,336,],
            319:[332,341,],
            320:[321,325,348,],
            321:[322,323,326,],
            322:[324,327,351,],
            323:[324,328,],
            324:[329,353,],
            325:[326,330,],
            326:[327,328,332,],
            327:[329,352,],
            328:[329,333,],
            329:[354,],
            330:[331,332,349,],
            331:[333,350,],
            332:[333,352,],
            333:[354,],
            334:[335,339,348,],
            335:[336,337,340,],
            336:[338,341,351,],
            337:[338,342,],
            338:[343,353,],
            339:[340,344,],
            340:[341,342,346,],
            341:[343,352,],
            342:[343,347,],
            343:[354,],
            344:[345,346,349,],
            345:[347,350,],
            346:[347,352,],
            347:[354,],
            348:[349,351,],
            349:[350,352,],
            350:[354,],
            351:[352,353,],
            352:[354,],
            353:[354,],
            354:[],
            },
            };
        //var M = Lattice2Babylon(M4, [0, 0, 0], scene);
        //var M = Lattice2Mesh(M4);
        var M1 = Lattice2Babylon(L, [0, 0, 0], scene);



        //////////////////////////////////////  Rotation //////////////////////////////////////////////////////////////

        camera.target = M1;

          /*
        // VER 2 //https://www.babylonjs-playground.com/#A83GX#5
        var currentPosition = { x: 0, y: 0 };
				var clicked = false;
				canvas.addEventListener("pointerdown", function (evt) {
					currentPosition.x = evt.clientX;
					currentPosition.y = evt.clientY;
					
					clicked = true;
				});
				
				canvas.addEventListener("pointermove", function (evt) {
					if (!clicked) {
						return;
					}
					M1.rotation.y = (evt.clientX - currentPosition.x) / 100.0;
					M1.rotation.x = (evt.clientY - currentPosition.y) / 100.0;
				});
				
				canvas.addEventListener("pointerup", function (evt) {
					clicked = false;
				});

        */



        // VER 1 //https://www.babylonjs-playground.com/#A83GX#7
        var currentPosition = { x: 0, y: 0 };
				var currentRotation = { x: 0, y: 0 };
				var clicked = false;
				canvas.addEventListener("pointerdown", function (evt) {
					currentPosition.x = evt.clientX;
					currentPosition.z = evt.clientY;
					currentRotation.x = M1.rotation.x;
					currentRotation.z = M1.rotation.y;
					clicked = true;
				});

				canvas.addEventListener("pointermove", function (evt) {
					if (!clicked) {
						return;
					}
					M1.rotation.z = currentRotation.z - (evt.clientX - currentPosition.x) / 100.0;
					M1.rotation.x = currentRotation.x + (evt.clientY - currentPosition.y) / 100.0;
				});
				
				canvas.addEventListener("pointerup", function (evt) {
					clicked = false;
				});
        



        //camera.attachControl(M1, true);
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        // Default Environment
        var environment = scene.createDefaultEnvironment({
          enableGroundShadow: true,
          groundYBias: 1,
        });
        environment.setMainColor(BABYLON.Color3.FromHexString("#74b9ff"));





        
        // Shadows
        var shadowGenerator = new BABYLON.ShadowGenerator(1024, light);
        shadowGenerator.useBlurExponentialShadowMap = true;
        shadowGenerator.blurKernel = 32;
        //shadowGenerator.addShadowCaster(sphere, true);

        // Enable VR
        var vrHelper = scene.createDefaultVRExperience({
          createDeviceOrientationCamera: false,
        });
        vrHelper.enableTeleportation({ floorMeshes: [environment.ground] });

        ////////////////////   Rotations   //////////////////////////////////////////////////////////////////////////

        // Runs every frame to rotate the sphere
        scene.onBeforeRenderObservable.add(() => {
          //M.rotation.x += 0.0001*scene.getEngine().getDeltaTime();
          //M.rotation.y += 0.0005*scene.getEngine().getDeltaTime();
          // Uncommnet below
          //M1.rotation.z += 0.0005 * scene.getEngine().getDeltaTime();
        });

        return scene;
      };

      var engine = createDefaultEngine();

      if (!engine) throw "engine should not be null.";
      scene = createScene();
      var sceneToRender = scene;

      engine.runRenderLoop(function () {
        if (sceneToRender && sceneToRender.activeCamera) {
          sceneToRender.render();
        }
      });

      // Resize
      window.addEventListener("resize", function () {
        engine.resize();
      });
    </script>
  </body>
</html>
